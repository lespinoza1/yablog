<!DOCTYPE html>
<html style="padding: 0; margin: 0;">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>layout</title>
    <link rel="stylesheet" type="text/css" href="../ligerui/skins/Aqua/css/ligerui-all.css" />
    <style type="text/css">
        body,
        html{ height: 100%; }
        body { background: #EAEEF5; padding: 0; margin: 0; overflow: hidden; }
        #left .l-accordion-header { display: none; }
    </style>
    <script src="../js/common/jquery-1.9.1.min.js"></script>
    <script src="../ligerui/ligerui.all.js"></script>
    <script src="../js/common/global.js"></script>
    <script src="../js/common/json2.js"></script>
    <script src="../js/common/base.js"></script>
    <script src="../js/common/underscore.js"></script>
    <script src="../js/common/backbone.js"></script>
    <script src="../js/common/sea-2.1.1-debug.js" id="seajsnode"></script>
</head>
<body style="">
    <div id="layout" style="width: 99.2%; margin: 0 auto;">
        <div id="left" position="left"  title="主要菜单">
            <div>
                <ul id="tree" style="margin-top:3px;">
                    <li></li>
                </ul>
                </div>
        </div>
        <div position="center" id="main">
            <div title="管理中心">
                管理中心
            </div>
        </div>
    </div>
    <script>
        function heightChanged(options) {

            if (accordion && options.middleHeight > 0) {
                accordion.setHeight(options.middleHeight);
            }
        }

        function addTab(tabid,text, url) {
            tab.addTabItem({tabid : tabid,text: text, content: text});
        }

        $('#layout').ligerLayout({
            leftWidth: 200,
            height: '100%',
            onHeightChanged: heightChanged
        });

        var height = $('.l-layout-center').height();

        $('#main').ligerTab({
            height: height
        });

        $('#tree').ligerTree({
            url: '../get_tree.php',
            textFieldName: 'menu_name',
            idFieldName: 'menu_id',
            parentIDFieldName: 'parent_id',
            //treeLine: false,
            nodeWidth: 120,
            single: true,
            checkbox: false,
            height: 120,
            onSelect: function (node) {
                var tabid = $(node.target).attr('tabid');

                if (!tabid) {
                    tabid = new Date().getTime();
                    $(node.target).attr('tabid', tabid)
                }

                addTab(tabid, node.data.menu_name, node.data.url);
            }
        });

        $('#left').ligerAccordion({
            height: height
        });


        var tab = $('#main').ligerGetTabManager(),
        accordion = $('#left').ligerGetAccordionManager(),
        tree = $('tree').ligerGetTreeManager();

    </script>
</body>
</html>